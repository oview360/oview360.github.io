function Oview48(e,t,n,i){function o(e,t){return"https://s3-ap-southeast-1.amazonaws.com/oview360/pic/"+A+"/"+A+e+"/"+String("000"+t).slice(-3)+".jpg"}function a(){bt=36,ot.innerHTML="",nt.style.opacity="";var e=dt[bt];$=e.naturalWidth,et=e.naturalHeight,j=$/Tt,s(e),k(!1,12,66),setTimeout(function(){it.addEventListener("mousedown",d),it.addEventListener("touchstart",d),it.addEventListener("dblclick",g),it.addEventListener("mousewheel",v),it.addEventListener("DOMMouseScroll",b),it.addEventListener("contextmenu",M),at.style.opacity=.2,at.className="blink",st.style.bottom="0"},600),setTimeout(function(){B=!0},2e3)}function s(e){e.naturalWidth&&(ct.width=e.naturalWidth,ct.height=e.naturalHeight,ut.drawImage(e,0,0))}function r(){B&&(B=!1,setTimeout(function(){at.style.opacity=0,at.className=""},200))}function c(){_&&clearTimeout(_)}function u(e){K*K+Q*Q>e&&c()}function l(e,t){t&&(K=e.pageX-G,Q=e.pageY-J),G=e.pageX,J=e.pageY}function d(e){if(mt)if(K=0,Q=0,gt=!1,vt=bt+.5,null==e.touches)e.preventDefault(),l(e,!1),_=setTimeout(g,1400,e),document.addEventListener("mousemove",h),document.addEventListener("mouseup",p);else if(e.touches.length<=2){if(1==e.touches.length){var t=e.targetTouches[0];l(t,!1),Z=0,_=setTimeout(g,1400,t)}else{var t=e.targetTouches[0],n=e.targetTouches[1],i=n.pageX-t.pageX,o=n.pageY-t.pageY;G=.5*(t.pageX+n.pageX),J=.5*(t.pageY+n.pageY),Z=Math.sqrt(i*i+o*o),c()}document.addEventListener("touchmove",h),document.addEventListener("touchend",p)}else c()}function h(e){if(null==e.touches)l(e,!0),u(2),f();else if(1==e.touches.length){e.preventDefault();var t=e.targetTouches[0];l(t,!0),u(12),f()}else if(2==e.touches.length){e.preventDefault();var t=e.targetTouches[0],n=e.targetTouches[1],i=.5*(t.pageX+n.pageX),o=.5*(t.pageY+n.pageY),a=n.pageX-t.pageX,s=n.pageY-t.pageY;K=i-G,Q=o-J,G=i,J=o,V=Math.sqrt(a*a+s*s),4*(V-Z)*(V-Z)>K*K+Q*Q?(yt=xt*(V/Z),V>Z?yt>X&&(yt=X):.96>yt&&(yt=.96),T(yt,1)):f(),Z=V}}function p(e){c(),null==e.touches?(this.removeEventListener("mousemove",h),this.removeEventListener("mouseup",p)):(this.removeEventListener("touchmove",h),this.removeEventListener("touchend",p)),1==xt?Mt?z():Math.abs(K)>9&&Math.abs(K)>Math.abs(Q)?k(0>K,1e3,Math.abs(1200/K)):Math.abs(Q)>9&&Math.abs(Q)>Math.abs(K)&&(mt=!1,k(0>Q,Math.floor(24),12)):y()}function f(){xt>1?w():Mt?z():E()}function m(e,t){var n=Math.floor(Math.floor(e/t)*t*(1+t)/t)*t;return n>I?I:n}function g(e){l(e,!1),I>xt?T(m(xt,.5),400):T(1,800)}function v(e){e.preventDefault(),mt&&(l(e,!1),x(.002*e.wheelDelta))}function b(e){e.preventDefault(),mt&&(l(e,!1),x(.08*-e.detail))}function x(e){c(),O&&clearTimeout(O),V=e,Z=Math.abs(e),Z>1&&(Z=1),V>0?(yt=xt*(1+Z),yt>X&&(yt=X)):(yt=xt/(1+Z),.96>yt&&(yt=.96)),T(yt,400*Z),O=setTimeout(y,400)}function y(){1.12>xt?T(1,400):xt>I&&T(I,400)}function M(){c(),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",p),document.removeEventListener("touchmove",h),document.removeEventListener("touchend",p)}function T(e,t,n){if(gt=!1,Mt&&z(),xt!=e){if(mt=!1,r(),1==e)R=0,U=0;else{const i=e/xt,a=G-tt.offsetLeft,c=J-tt.offsetTop;R=(a-nt.offsetLeft)*i-a,U=(c-nt.offsetTop)*i-c}if(L(e,t),q=setTimeout(function(){nt.style.transition=""},t),xt=e,1>=xt)ot.innerHTML="",ct.width!=$&&s(dt[bt]);else if(ct.width==$){if(xt>1.2){var u=ht[bt];u?u.complete&&s(u):(ht[bt]=new Image,u=ht[bt],u.src=o("-p1800",bt+1),u.setAttribute("n",bt),u.onload=function(){const e=parseInt(this.getAttribute("n"));e==bt&&xt>1.2&&(ot.innerHTML="",s(this))})}1.6>xt?""!=ot.innerHTML&&(ot.innerHTML=""):xt>1.9&&""==ot.innerHTML&&(ot.innerHTML=N)}n||setTimeout(function(){mt=!0},t)}}function w(){0>K?R+=64+4096/(K-64):R-=64-4096/(K+64),0>Q?U+=64+4096/(Q-64):U-=64-4096/(Q+64),L(xt)}function L(e,t){const n=(e-1)*Tt,i=(e-1)*wt;e>=1?(0>R?R=0:R>n&&(R=n),0>U?U=0:U>i&&(U=i)):(R>0?R=0:n>R&&(R=n),U>0?U=0:i>U&&(U=i)),t&&(q&&clearTimeout(q),nt.style.transition="all "+.001*t+"s",nt.style.width=Math.round(Tt*e)+"px",nt.style.height=Math.round(wt*e)+"px"),nt.style.left=Math.round(-R)+"px",nt.style.top=Math.round(-U)+"px"}function E(){0>K?vt-=1+10/(K-10):vt+=1-10/(K+10),vt>=Y?vt%=Y:0>vt&&(vt=Y+vt%Y),C(Math.floor(vt))}function C(e){e!=bt&&(r(),dt[e].naturalWidth&&dt[e].complete&&ut.drawImage(dt[e],0,0),bt=e)}function k(e,t,n,i){gt=!0,setTimeout(function(){e?(0==bt&&(bt=Y),C(bt-1)):(47==bt&&(bt=-1),C(bt+1)),n=99>n?1.09*n:99,t>1?gt&&k(e,t-1,n,i):(gt=!1,i?H(i):mt=!0)},Math.round(n))}function H(e){var t=document.createElement("div"),n=pt[e],i=n.r,o=n.x,a=n.y,s=n.info,r=0;.05>i?i=.05:i>.2&&(i=.2);const c=Math.round(i*Lt),u=Math.round(o*Tt),l=Math.round(a*wt),d=5*(1-2*i)/3,h=Tt*(d-1),p=wt*(d-1);var f=nt.firstChild,m=f.cloneNode();ctx=m.getContext("2d"),nt.appendChild(m),ctx.save(),ctx.beginPath(),ctx.arc(u*j,l*j,c*j,0,2*Math.PI),ctx.clip(),ctx.drawImage(f,0,0),ctx.restore(),ctx.lineWidth=4*j/d,ctx.strokeStyle="rgba(255,255,255,.5)",ctx.stroke(),f.style.cssText+="-webkit-filter:blur(8px) invert(15%);filter:blur(8px) invert(15%)",R=h*o,U=p*a,o>.5?(r=d*(Tt-u-c),h-R>r&&(R=h)):(r=d*(u-c),R>r&&(R=r)),a>.5?(r=d*(wt-l-c),p-U>r&&(U=p)):(r=d*(l-c),U>r&&(U=r)),L(d,1600),t.className="eigenPtInfo",tt.appendChild(t),t.innerHTML=s,b_high=a>.5?d*(l-c)-U:wt+U-d*(l+c),r=b_high-t.offsetHeight-18,12>r?(a>.5?t.style.top="0":t.style.bottom="0",t.style.height=b_high-18+"px",t.style.overflowY="scroll"):a>.5?t.style.top=r+"px":t.style.bottom=r+"px",t.style.left=o*(Tt-t.offsetWidth)+"px",setTimeout(function(){mt=!0},500)}function z(){L(1,600),nt.childElementCount>1&&(nt.lastChild.remove(),nt.firstChild.style.cssText=S,Mt=0),tt.childElementCount>3&&tt.lastChild.remove(),st.style.bottom="0"}const F=!!("ontouchstart"in window),P=navigator.language,Y=48,I=3,X=4.5,A=t,D='<svg viewBox="0 0 128 128"><circle fill="#FFF" cx="64" cy="64" r="64"/><path fill="#AAA" d="M109.6,49c0-10.5-1.7-20.6-4.8-30c0,0.1,0,0.2,0,0.3c0,4.4-1.6,8.5-4.3,11.6c-1.6-1.3-3.3-2.3-5.2-3.1C87,20.4,76,16,64,16s-23,4.4-31.4,11.7c-1.9,0.8-3.6,1.9-5.2,3.1c-2.7-3.1-4.3-7.2-4.3-11.6c0-0.1,0-0.2,0-0.3c-3.1,9.5-4.8,19.5-4.8,30c-1.6,4.7-2.4,9.8-2.4,15c0,26.5,21.5,48,48,48s48-21.5,48-48C112,58.8,111.2,53.7,109.6,49z M42.4,67.6c-9.9,0-18-8.1-18-18s8.1-18,18-18s18,8.1,18,18S52.3,67.6,42.4,67.6z M64,76.4c-2.4-2.5-4.4-5.5-5.9-8.7c2.4-2.1,4.4-4.7,5.9-7.6c1.4,2.9,3.4,5.5,5.9,7.6C68.4,71,66.4,73.9,64,76.4z M85.6,67.6c-9.9,0-18-8.1-18-18s8.1-18,18-18s18,8.1,18,18S95.5,67.6,85.6,67.6z"/></svg>',N='<svg viewBox="0 0 96 96"><circle cx="48" cy="48" fill="#BBB"><animate attributeName="r" from="6" to="48" dur="1.5s" repeatCount="indefinite"/><animate attributeName="opacity" from=".8" to="0" dur="1.5s" repeatCount="indefinite"/></circle></svg>',S="position:absolute;width:100%;height:100%;",W=F?["滑動進行 360° 觀看<br>雙指外撥以放大檢視","Swipe for a 360° view<br>Pinch out to zoom in"]:["拖曳進行 360° 觀看<br>向上捲動以放大檢視","Drag for a 360° view<br>Scroll up to zoom in"];var B,_,O,q,j,G,J,K,Q,R,U,V,Z,$,et,tt=document.getElementById(e),nt=document.createElement("div"),it=document.createElement("div"),ot=document.createElement("div"),at=document.createElement("p"),st=document.createElement("div"),rt=document.createElement("a"),ct=document.createElement("canvas"),ut=ct.getContext("2d"),lt=document.createElement("style"),dt=new Array(Y),ht=new Array(Y),pt=[0],ft=[],mt=!1,gt=!1,vt=0,bt=0,xt=1,yt=1,Mt=0,Tt=tt.offsetWidth,wt=tt.offsetHeight,Lt=Math.max(Tt,wt);tt.appendChild(it),it.appendChild(ot),it.appendChild(at),tt.appendChild(st),tt.appendChild(nt),nt.appendChild(ct),tt.style.cssText="position:relative;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;text-align:center;font:18px Helvetica,STHeiti,sans-serif;",ot.style.top=.5*wt-48+"px",ot.innerHTML=N,at.innerHTML=0==P.indexOf("zh")?W[0]:W[1],nt.style.cssText=S+"left:0;top:0;text-align:left;opacity:.1;transition:opacity 1s",ct.style.cssText=S,st.style.bottom="-44px",st.className="dashPod",it.className="ctrLayer",lt.innerHTML=".ctrLayer{position:absolute;width:100%;height:100%;z-index:2;cursor:grab;cursor:-moz-grab;cursor:-webkit-grab}.ctrLayer:active{cursor:grabbing;cursor:-moz-grabbing;cursor:-webkit-grabbing}.ctrLayer>div{position:relative;width:96px;height:96px;margin:auto;pointer-events:none}.ctrLayer p{position:absolute;top:0;width:100%;margin:0;padding:8px 0;opacity:0;background:#FFF;font-size:16px;transition:opacity 1s}.blink{animation:blink 4s infinite ease-in 1s;-webkit-animation:blink 4s infinite ease-in 1s}@keyframes blink{0%{opacity:.2}50%{opacity:.6}100%{opacity:.2}}@-webkit-keyframes blink{0%{opacity:.2}50%{opacity:.6}100%{opacity:.2}}.dashPod{position:absolute;width:100%;height:40px;opacity:.4;z-index:3;pointer-events:none;transition:bottom .6s}.dashPod:hover{opacity:.7}.dashPod>div{pointer-events:auto;cursor:pointer;float:left}.dashPod>div:first-child{margin-left:8px}.dashPod>div>p{width:10px;height:10px;background:rgba(128,128,128,.2);border-radius:50%;border:2px solid #FFF;box-shadow:0 2px 5px #999;margin:13px}.dashPod>div:hover>p{background:#FFF}.dashPod>a{pointer-events:auto;position:absolute;right:6px;width:36px;height:36px}.eigenPtInfo{position:absolute;box-sizing:border-box;border-radius:12px;max-width:70%;z-index:5;padding:10px;color:#222;text-shadow:0 1px 7px #FFF;background:rgba(255,255,255,.5)}",document.head.appendChild(lt),n.length>5&&(n=n.slice(0,5)),pt=pt.concat(n);const Et=pt.length-1;if(Et>0)for(var Ct=0;Et>Ct;Ct++)ft[Ct]=document.createElement("div"),ft[Ct].id=Ct+1,ft[Ct].appendChild(document.createElement("p")),st.appendChild(ft[Ct]),ft[Ct].onclick=function(){tt.focusPoint(this.id)};return i&&(rt.innerHTML=D,rt.href=i,rt.setAttribute("target","_blank"),st.appendChild(rt)),tt.run=function(){function e(e,i,a,s){for(;n[e]!=i;n[e]++)dt[n[e]]=new Image,dt[n[e]].src=o("-p900",n[e]+1),dt[n[e]].onload=function(){t[e]++,t[e]==a&&s()}}var t=[0,0,0,0],n=[36,0,10,24];e(0,48,10,function(){e(1,10,9,function(){a(),setTimeout(function(){e(2,24,12,function(){e(3,36,11,function(){$||a()})})},800)})})},tt.focusPoint=function(e){gt=!1,mt=!1,st.style.bottom="-44px";const t=pt[e].n-1,n=xt-1;setTimeout(function(){if(T(1,400*n,!0),t==bt)setTimeout(function(){H(e)},408*n);else{var i=t-bt;2*Math.abs(i)>Y&&(i=0>i?i+Y:i-Y);var o=Math.abs(i),a=400*n-72*o-72;0>a&&(a=0),setTimeout(function(){k(0>i,o,64-2*o,e)},a)}Mt=e},104)},tt}